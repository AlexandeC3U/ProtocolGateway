# Example Device Configuration for Web UI Testing
# This file provides examples of different protocol configurations
# Use the Web UI at http://localhost:8080 to add/edit devices

version: "1.0"

devices:
  # Example 1: Modbus TCP Device
  - id: example-modbus-001
    name: "Example Modbus PLC"
    description: "Sample Modbus TCP device configuration"
    protocol: modbus-tcp
    enabled: false  # Disabled by default - enable via Web UI
    uns_prefix: factory/example/modbus-plc-001
    poll_interval: 1s
    connection:
      host: 192.168.1.100
      port: 502
      slave_id: 1
      timeout: 5s
      retry_count: 3
      retry_delay: 100ms
    tags:
      - id: temperature
        name: "Temperature"
        description: "Process temperature"
        address: 0
        register_type: holding_register
        data_type: int16
        scale_factor: 0.1
        offset: 0
        unit: "Â°C"
        topic_suffix: temperature
        enabled: true
        access_mode: read

      - id: pressure
        name: "Pressure"
        description: "System pressure"
        address: 1
        register_type: holding_register
        data_type: int16
        scale_factor: 0.01
        offset: 0
        unit: "bar"
        topic_suffix: pressure
        enabled: true
        access_mode: read

  # Example 2: OPC UA Device
  - id: example-opcua-001
    name: "Example OPC UA Server"
    description: "Sample OPC UA device configuration"
    protocol: opcua
    enabled: false
    uns_prefix: factory/example/opcua-001
    poll_interval: 2s
    connection:
      host: 192.168.1.200
      port: 4840
      opc_endpoint_url: "opc.tcp://192.168.1.200:4840"
      opc_security_policy: "None"
      opc_security_mode: "None"
      opc_auth_mode: "Anonymous"
      timeout: 10s
      retry_count: 3
      retry_delay: 200ms
    tags:
      - id: tank_level
        name: "Tank Level"
        description: "Storage tank level"
        opc_node_id: "ns=2;s=Tank.Level"
        data_type: float32
        scale_factor: 1.0
        unit: "%"
        topic_suffix: tank/level
        enabled: true
        access_mode: read

      - id: flow_rate
        name: "Flow Rate"
        description: "Pump flow rate"
        opc_node_id: "ns=2;s=Pump.FlowRate"
        data_type: float32
        scale_factor: 1.0
        unit: "L/min"
        topic_suffix: pump/flow_rate
        enabled: true
        access_mode: read

  # Example 3: Siemens S7 Device
  - id: example-s7-001
    name: "Example S7-1500 PLC"
    description: "Sample Siemens S7 device configuration"
    protocol: s7
    enabled: false
    uns_prefix: factory/example/s7-plc-001
    poll_interval: 1s
    connection:
      host: 192.168.1.10
      port: 102
      s7_rack: 0
      s7_slot: 1
      timeout: 5s
      retry_count: 3
      retry_delay: 100ms
    tags:
      - id: motor_speed
        name: "Motor Speed"
        description: "Conveyor motor speed"
        s7_address: "DB1.DBW0"
        data_type: int16
        scale_factor: 1.0
        unit: "RPM"
        topic_suffix: motor/speed
        enabled: true
        access_mode: read

      - id: conveyor_running
        name: "Conveyor Running"
        description: "Conveyor run status"
        s7_address: "DB1.DBX2.0"
        data_type: bool
        scale_factor: 1.0
        topic_suffix: conveyor/running
        enabled: true
        access_mode: read

# To use these examples:
# 1. Start the gateway: docker-compose up -d
# 2. Open Web UI: http://localhost:8080
# 3. Edit the example devices with your actual device IPs
# 4. Enable the devices you want to use
# 5. Monitor MQTT messages on EMQX dashboard: http://localhost:18083
